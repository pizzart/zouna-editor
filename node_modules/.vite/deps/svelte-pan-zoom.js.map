{
  "version": 3,
  "sources": ["../../svelte-resize-observer-action/src/lib/index.ts", "../../svelte-pan-zoom/dist/index.js"],
  "sourcesContent": ["// keep track of which resize callback is associated with each element\ntype ResizeCallback = (entry: ResizeObserverEntry) => void\nconst resizeCallbacks = new WeakMap<Element, ResizeCallback>()\n\n// defined outside of action, so we only create a single instance\nlet resizeObserver: ResizeObserver\n\nexport function resize(target: Element, callback: ResizeCallback) {\n  // create on first use, inside the action, so we're SSR friendly\n  resizeObserver = resizeObserver || new ResizeObserver(entries => {\n    for (const entry of entries) {\n      const callback = resizeCallbacks.get(entry.target)\n      if (callback) {\n        callback(entry)\n      }\n    }\n  })\n\n  resizeCallbacks.set(target, callback)\n  resizeObserver.observe(target)\n\n  return {\n    destroy() {\n      resizeObserver.unobserve(target)\n      resizeCallbacks.delete(target)\n    }\n  }\n}", "import{resize as J}from\"svelte-resize-observer-action\";var Y=(e,m)=>Math.hypot(e.x-m.x,e.y-m.y),B=(e,m)=>({x:(e.x+m.x)/2,y:(e.y+m.y)/2}),H=(e,m)=>({x:e.x-m.x,y:e.y-m.y}),N=.02,Q=120;function tt(e,m){let p=window.devicePixelRatio,i=e.getContext(\"2d\"),k=requestAnimationFrame,a,y,g,C,P,L,T,b=e.width=e.clientWidth*p,w=e.height=e.clientHeight*p,u,l=0,r={vx:0,vy:0,ts:0},f=new Map,h=[];function O(t){({width:y,height:g,render:C,padding:P,maxZoom:L,friction:T}={padding:0,maxZoom:16,friction:.97,...t}),a=Math.min(e.width/(y+P*p),e.height/(g+P*p)),i.resetTransform(),i.translate(e.width/2,e.height/2),i.scale(a,a),i.translate(-y/2,-g/2),_(),u=d({x:e.width/2,y:e.height/2}),E()}O(m);let q=J(e,t=>{let n=t.contentRect,o=d({x:b/2,y:w/2}),s=i.getTransform();b=n.width*p,w=n.height*p,e.width=b,e.height=w,a=Math.min(e.width/(m.width+P*p),e.height/(m.height+P*p)),i.setTransform(s),u=d({x:b/2,y:w/2}),i.translate(u.x-o.x,u.y-o.y),l||z(performance.now())});function A(t){for(;h.length&&t-h[0].t>Q;)h.shift()}function K(t){let n=performance.now();A(n),h.push({point:t,t:n})}function _(){l&&(cancelAnimationFrame(l),l=0),r.vx=0,r.vy=0,h.length=0}function S(){let t=d({x:0,y:0}),n=d({x:e.width,y:e.height});t.x>y&&(i.translate(t.x-y,0),r.vx=-r.vx),t.y>g&&(i.translate(0,t.y-g),r.vy=-r.vy),n.x<0&&(i.translate(n.x,0),r.vx=-r.vx),n.y<0&&(i.translate(0,n.y),r.vy=-r.vy)}function F(t){t.stopPropagation(),e.setPointerCapture(t.pointerId);let n=R(t);f.set(t.pointerId,n),_()}function v(t){if(t.stopPropagation(),e.releasePointerCapture(t.pointerId),f.delete(t.pointerId),f.size===0&&(A(performance.now()),h.length>1)){let n=h[0],o=h[h.length-1],s=o.point.x-n.point.x,c=o.point.y-n.point.y,x=o.t-n.t;r={vx:s/x,vy:c/x,ts:performance.now()},E()}}function D(t){if(t.stopPropagation(),!f.has(t.pointerId))return;let n=R(t);switch(f.size){case 1:{let o=d(n);K(o);let s=f.get(t.pointerId),c=H(o,d(s));u=o,M(c),E(),f.set(t.pointerId,n);break}case 2:{let o=[...f.values()],s=d(o[0]),c=d(o[1]),x=B(s,c),U=Y(s,c);f.set(t.pointerId,n),o=[...f.values()],s=d(o[0]),c=d(o[1]);let W=B(s,c),X=Y(s,c),j=H(W,x);M(j);let G=X/U;V(W,G);break}}}function Z(t){t.preventDefault(),t.stopPropagation();let n=R(t),o=Math.exp(-t.deltaY/512);V(d(n),o)}function M(t){i.translate(t.x,t.y),S()}function V(t,n){function o(c){i.translate(t.x,t.y),i.scale(c,c),i.translate(-t.x,-t.y)}o(n);let s=i.getTransform();s.a<a&&o(a/s.a),s.a>L&&o(L/s.a),u=t,E()}function R(t){return{x:t.offsetX*p,y:t.offsetY*p}}function d(t){return i.getTransform().inverse().transformPoint(t)}function E(){l||(l=k(z))}function z(t){i.save(),i.resetTransform(),i.clearRect(0,0,e.width,e.height),i.restore();let n=C(i,t,u),o=Math.abs(r.vx)>N||Math.abs(r.vy)>N;if(o){let s=t-r.ts,c=r.vx*s,x=r.vy*s;M({x:c,y:x}),r.vx*=T,r.vy*=T,r.ts=t}o||n?l=k(z):l=0}let I={passive:!0};return e.addEventListener(\"pointerdown\",F,I),e.addEventListener(\"pointerup\",v,I),e.addEventListener(\"pointercancel\",v,I),e.addEventListener(\"pointermove\",D,I),e.addEventListener(\"wheel\",Z),{update(t){O(t)},destroy(){q.destroy(),e.removeEventListener(\"pointerdown\",F),e.removeEventListener(\"pointerup\",v),e.removeEventListener(\"pointercancel\",v),e.removeEventListener(\"pointermove\",D),e.removeEventListener(\"wheel\",Z)}}}export{tt as panzoom};\n"],
  "mappings": "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",
  "names": ["resizeCallbacks", "resizeObserver", "resize", "target", "callback", "entries", "entry", "b", "r", "s"]
}
